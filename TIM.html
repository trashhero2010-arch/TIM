<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>çˆ±å¿ƒå¡ç‰‡åŠ¨æ•ˆï¼ˆä»ä¸¤è¾¹é£å‡ºï¼‰</title>
  <style>
    :root{ --card-w:80px; --card-h:38px; }
    html,body{
      height:100%;margin:0;
      font-family:system-ui, "PingFang SC", "Microsoft YaHei", sans-serif;
      background:linear-gradient(180deg,#fffaf6,#ffeef0);
      overflow:hidden;
    }
    .phone {
      width:420px;
      height:860px;
      max-width:100%;
      margin:24px auto;
      background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(255,255,255,0.6));
      border-radius:28px;
      box-shadow:0 12px 40px rgba(0,0,0,0.12);
      position:relative;
      overflow:hidden;
      border:1px solid rgba(0,0,0,0.04);
    }
    header{padding:12px 16px;text-align:center;}
    header h1{font-size:16px;margin:0;font-weight:600}
    .stage{position:absolute;left:0;right:0;top:60px;bottom:0;display:block;}
    .card{
      position:absolute;
      width:var(--card-w);
      height:var(--card-h);
      box-sizing:border-box;
      padding:4px 6px;
      border-radius:8px;
      background:linear-gradient(180deg,#ffffff,#fff6f8);
      box-shadow:0 3px 10px rgba(255,107,138,0.1), 0 1px 3px rgba(0,0,0,0.05);
      display:flex;align-items:center;justify-content:center;
      text-align:center;font-weight:600; font-size:11px; color:#444;
      transform-origin:center center; opacity:0;
      transition: all 0.9s ease;
    }
  </style>
</head>
<body>
  <div class="phone">
    <header>
      <h1>ğŸ’– ç»™æˆ‘æœ€çˆ±çš„å¥³æœ‹å‹ ğŸ’–</h1>
    </header>
    <div class="stage" id="stage">
      <div class="positions" id="positions"></div>
    </div>
  </div>

  <script>
    async function loadWords() {
      try {
        const res = await fetch('word.txt');
        const text = await res.text();
        const lines = text.split(/\r?\n/).map(l => l.trim()).filter(Boolean);
        createHeart(lines);
      } catch (err) {
        console.error('æ— æ³•è¯»å– word.txt:', err);
      }
    }

    function heartPoints(count, w, h, padding=120){
      const pts = [];
      const samples = Math.max(count*4, 300);
      const raw = [];
      for(let i=0;i<samples;i++){
        const t = (i/samples) * Math.PI * 2;
        const x = 16 * Math.pow(Math.sin(t),3);
        const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
        raw.push([x,y]);
      }
      let minx=Infinity,maxx=-Infinity,miny=Infinity,maxy=-Infinity;
      raw.forEach(([x,y])=>{if(x<minx)minx=x;if(x>maxx)maxx=x;if(y<miny)miny=y;if(y>maxy)maxy=y;});
      for(let i=0;i<count;i++){
        const idx = Math.floor(i * raw.length / count);
        const [x,y] = raw[idx];
        const nx = (x - minx) / (maxx - minx);
        const ny = (y - miny) / (maxy - miny);
        const px = padding + nx * (w - padding*2);
        const py = padding + (1-ny) * (h - padding*2);
        pts.push({x:px,y:py});
      }
      return pts;
    }

    function createHeart(lines){
      const stage = document.getElementById('stage');
      const positionsLayer = document.getElementById('positions');
      const w = stage.clientWidth;
      const h = stage.clientHeight;
      const pts = heartPoints(lines.length, w, h, 40);

      let side = 'right'; // å…ˆä»å³è¾¹å¼€å§‹
      let counter = 0;

      lines.forEach((txt, i)=>{
        const el = document.createElement('div');
        el.className = 'card';
        el.textContent = txt;
        positionsLayer.appendChild(el);

        // åˆå§‹ä½ç½®ï¼šä»å³æˆ–å·¦è¾¹é£å‡º
        if (side === 'right') {
          el.style.left = w + 100 + 'px';
        } else {
          el.style.left = -100 + 'px';
        }
        el.style.top = (Math.random() * h * 0.6 + h*0.2) + 'px';
        el.style.opacity = 0;
        el.style.transform = 'scale(0.7) rotate(' + (Math.random()*40-20) + 'deg)';

        const target = pts[i];
        setTimeout(()=>{
          el.style.left = target.x - 40 + 'px';
          el.style.top = target.y - 19 + 'px';
          el.style.opacity = 1;
          el.style.transform = 'scale(1) rotate(0deg)';
        }, i*200);

        counter++;
        if (counter >= 3) { // æ¯3ä¸ªæ¢è¾¹
          side = side === 'right' ? 'left' : 'right';
          counter = 0;
        }
      });
    }

    window.addEventListener('load', loadWords);
  </script>
</body>
</html>






























